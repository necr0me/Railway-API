---
swagger: '2.0'
info:
  title: Railway-API
  version: v1
  description: Railway-API documentation
paths:
  "/api/v1/carriage_types":
    get:
      summary: Retrieves all carriage types. By necr0me
      tags:
      - Carriage types
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage types found
          examples:
            application/json:
              carriage_types:
              - id: 6994
                name: Bea Lowe
                description: Grady Inc
                capacity: 8
                created_at: '2023-03-20T11:00:41.037Z'
                updated_at: '2023-03-20T11:00:41.037Z'
              - id: 6995
                name: Brock Lee
                description: Fisher, Hammes and Ferry
                capacity: 8
                created_at: '2023-03-20T11:00:41.040Z'
                updated_at: '2023-03-20T11:00:41.040Z'
              - id: 6996
                name: Kerry Oki
                description: Miller-Bergstrom
                capacity: 8
                created_at: '2023-03-20T11:00:41.041Z'
                updated_at: '2023-03-20T11:00:41.041Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
    post:
      summary: Creates new carriage type. By necr0me
      tags:
      - Carriage types
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            carriage_type:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                capacity:
                  type: integer
              required:
              - name
              - capacity
              example:
                name: Coupe
                description: Some description
                capacity: 32
          required:
          - carriage_type
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Carriage type successfully created
          examples:
            application/json:
              message: Carriage type successfully created
              carriage_type:
                id: 6997
                name: Earl E. Byrd
                description: Senger Group
                capacity: 8
                created_at: '2023-03-20T11:00:41.098Z'
                updated_at: '2023-03-20T11:00:41.098Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during carriage type create
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Name is too short (minimum is 3 characters)
              - Capacity must be greater than or equal to 0
  "/api/v1/carriage_types/{carriage_type_id}":
    put:
      summary: Updates carriage type. By necr0me
      tags:
      - Carriage types
      consumes:
      - application/json
      parameters:
      - name: carriage_type_id
        in: path
        type: integer
        required: true
        description: Id of carriage type that you want to update
      - name: params
        in: body
        schema:
          type: object
          properties:
            carriage_type:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                capacity:
                  type: integer
              required:
              - name
              - capacity
              example:
                name: Coupe
                description: Some description
                capacity: 32
          required:
          - carriage_type
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage type successfully updated
          examples:
            application/json:
              message: Carriage type successfully updated
              carriage_type:
                name: New name
                description: New description
                capacity: 4
                id: 6998
                created_at: '2023-03-20T11:00:41.124Z'
                updated_at: '2023-03-20T11:00:41.143Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Carriage type not found
          examples:
            application/json:
              message: Couldn't find CarriageType with 'id'=-1
        '422':
          description: Error occurred during carriage type update
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Can't update carriage type capacity that has any carriages
    delete:
      summary: Deletes carriage type. By necr0me
      tags:
      - Carriage types
      parameters:
      - name: carriage_type_id
        in: path
        type: integer
        required: true
        description: Id of carriage type that you want to destroy
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '204':
          description: Carriage type successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Carriage type not found
          examples:
            application/json:
              message: Couldn't find CarriageType with 'id'=-1
        '422':
          description: Error occurred during carriage type destroy
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Can't destroy carriage type that has any carriages
  "/api/v1/carriages":
    get:
      summary: Retrieves all carriages. By necr0me
      tags:
      - Carriages
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriages found
          examples:
            application/json:
              carriages:
              - id: 5642
                name: Poseidon
                carriage_type_id: 7008
                created_at: '2023-03-20T11:00:41.248Z'
                updated_at: '2023-03-20T11:00:41.248Z'
                order_number: 2
                train_id: 
              - id: 5643
                name: Hades
                carriage_type_id: 7009
                created_at: '2023-03-20T11:00:41.252Z'
                updated_at: '2023-03-20T11:00:41.252Z'
                order_number: 24
                train_id: 
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
    post:
      summary: Creates new carriage. By necr0me
      tags:
      - Carriages
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            carriage:
              type: object
              properties:
                name:
                  type: string
                carriage_type_id:
                  type: integer
              required:
              - name
              - carriage_type_id
              example:
                name: XT-231-321
                carriage_type_id: 1
          required:
          - carriage
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Carriage successfully created
          examples:
            application/json:
              message: Carriage was successfully created
              carriage:
                id: 5644
                name: Hades
                carriage_type_id: 7010
                created_at: '2023-03-20T11:00:41.282Z'
                updated_at: '2023-03-20T11:00:41.282Z'
                order_number: 
                train_id: 
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during carriage create
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Type must exist
              - Name is too short (minimum is 3 characters)
  "/api/v1/carriages/{carriage_id}":
    get:
      summary: Get concrete carriage. By necr0me
      tags:
      - Carriages
      parameters:
      - name: carriage_id
        in: path
        type: integer
        required: true
        description: Id of carriage that you want to see
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage found
          examples:
            application/json:
              carriage:
                id: 5645
                name: Aphrodite
                carriage_type_id: 7014
                created_at: '2023-03-20T11:00:41.314Z'
                updated_at: '2023-03-20T11:00:41.314Z'
                order_number: 23
                train_id: 
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '404':
          description: Carriage not found
          examples:
            application/json:
              message: Couldn't find Carriage with 'id'=-1
    put:
      summary: Update concrete carriage. By necr0me
      tags:
      - Carriages
      consumes:
      - application/json
      parameters:
      - name: carriage_id
        in: path
        type: integer
        required: true
        description: Id of carriage that you want to update
      - name: params
        in: body
        schema:
          type: object
          properties:
            carriage:
              type: object
              properties:
                name:
                  type: string
                carriage_type_id:
                  type: integer
              required:
              - name
              - carriage_type_id
              example:
                name: XT-231-321
                carriage_type_id: 1
          required:
          - carriage
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage successfully updated
          examples:
            application/json:
              message: Carriage name was successfully updated
              carriage:
                name: New name
                carriage_type_id: 7016
                id: 5647
                created_at: '2023-03-20T11:00:41.342Z'
                updated_at: '2023-03-20T11:00:41.351Z'
                order_number: 25
                train_id: 
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Carriage not found
          examples:
            application/json:
              message: Couldn't find Carriage with 'id'=-1
        '422':
          description: Error occurred during carriage update
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Name is too short (minimum is 3 characters)
    delete:
      summary: Destroy concrete carriage. By necr0me
      tags:
      - Carriages
      parameters:
      - name: carriage_id
        in: path
        type: integer
        require: true
        description: Id of carriage that you want to destroy
        required: true
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '204':
          description: Carriage successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Carriage not found
          examples:
            application/json:
              message: Couldn't find Carriage with 'id'=-1
        '422':
          description: Error occurred during carriage destroy
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  api/v1/passing_trains:
    get:
      summary: Retrieves all passing trains. By necr0me
      tags:
      - Passing trains
      produces:
      - application/json
      responses:
        '200':
          description: Passing trains found
          examples:
            application/json:
              passing_trains:
              - id: 2542
                departure_time: '2023-03-20T11:20:41.470Z'
                arrival_time: '2023-03-20T11:00:41.470Z'
                way_number: 1
                train_id: 3479
                station_id: 8915
                created_at: '2023-03-20T11:00:41.492Z'
                updated_at: '2023-03-20T11:00:41.492Z'
              - id: 2543
                departure_time: '2023-03-20T11:40:41.494Z'
                arrival_time: '2023-03-20T11:20:41.494Z'
                way_number: 1
                train_id: 3479
                station_id: 8915
                created_at: '2023-03-20T11:00:41.496Z'
                updated_at: '2023-03-20T11:00:41.496Z'
              - id: 2544
                departure_time: '2023-03-20T12:00:41.497Z'
                arrival_time: '2023-03-20T11:40:41.497Z'
                way_number: 1
                train_id: 3479
                station_id: 8915
                created_at: '2023-03-20T11:00:41.499Z'
                updated_at: '2023-03-20T11:00:41.499Z'
    post:
      summary: Creates new passing train. By necr0me
      tags:
      - Passing trains
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            passing_train:
              type: object
              properties:
                arrival_time:
                  type: string
                  format: datetime
                departure_time:
                  type: string
                  format: datetime
                way_number:
                  type: integer
                station_id:
                  type: integer
                train_id:
                  type: integer
              required:
              - arrival_time
              - departure_time
              - station_id
              - train_id
              example:
                arrival_time: '2023-03-20T14:00:40+03:00'
                departure_time: '2023-03-20T14:20:40+03:00'
                way_number: 1
                station_id: 1
                train_id: 1
            required:
            - passing_train
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Passing train successfully created
          examples:
            application/json:
              message: Train stop successfully created
              passing_train:
                id: 2545
                departure_time: '2023-03-20T11:20:41.509Z'
                arrival_time: '2023-03-20T11:00:41.509Z'
                way_number: 1
                train_id: 3480
                station_id: 8916
                created_at: '2023-03-20T11:00:41.518Z'
                updated_at: '2023-03-20T11:00:41.518Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during passing train create
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Train must exist
              - Station must exist
  api/v1/passing_trains/{passing_train_id}:
    put:
      summary: Updates passing train. By necr0me
      tags:
      - Passing trains
      consumes:
      - application/json
      parameters:
      - name: passing_train_id
        in: path
        type: integer
        required: true
        description: Id of passing train record that you want to update
      - name: params
        in: body
        schema:
          type: object
          properties:
            passing_train:
              type: object
              properties:
                arrival_time:
                  type: string
                  format: datetime
                departure_time:
                  type: string
                  format: datetime
                way_number:
                  type: integer
                station_id:
                  type: integer
                train_id:
                  type: integer
              required:
              - arrival_time
              - departure_time
              - station_id
              - train_id
              example:
                arrival_time: '2023-03-20T14:00:40+03:00'
                departure_time: '2023-03-20T14:20:40+03:00'
                way_number: 1
                station_id: 1
                train_id: 1
            required:
            - passing_train
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Passing train successfully updated
          examples:
            application/json:
              message: Train stop successfully updated
              passing_train:
                arrival_time: '2023-03-20T11:05:41.551Z'
                train_id: 3483
                station_id: 8919
                id: 2546
                departure_time: '2023-03-20T11:20:41.551Z'
                way_number: 1
                created_at: '2023-03-20T11:00:41.556Z'
                updated_at: '2023-03-20T11:00:41.566Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Passing train not found
          examples:
            application/json:
              message: Couldn't find PassingTrain with 'id'=-1
        '422':
          description: Error occurred during passing train update
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Departure time can't be greater than arrival time
    delete:
      summary: Deletes passing train. By necr0me
      tags:
      - Passing trains
      parameters:
      - name: passing_train_id
        in: path
        type: integer
        required: true
        description: Id of passing train record that you want to destroy
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Passing train successfully destroyed
          examples:
            application/json:
              message: Train stop successfully removed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Passing train not found
          examples:
            application/json:
              message: Couldn't find PassingTrain with 'id'=-1
        '422':
          description: Error occurred during passing train destroy
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/profile":
    get:
      summary: Retrieves user profile. By necr0me
      tags:
      - Profile
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Profile found
          examples:
            application/json:
              profile:
                id: 584
                name: John
                surname: Doe
                patronymic: Doehovich
                phone_number: "+375331234567"
                passport_code: KH1234567
                user_id: 9811
                created_at: '2023-03-20T11:00:41.700Z'
                updated_at: '2023-03-20T11:00:41.700Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
    post:
      summary: Creates user profile. By necr0me
      tags:
      - Profile
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            profile:
              type: object
              properties:
                name:
                  type: string
                surname:
                  type: string
                patronymic:
                  type: string
                phone_number:
                  type: string
                passport_code:
                  type: string
              required:
              - name
              - surname
              - patronymic
              - phone_number
              - passport_code
              example:
                name: John
                surname: Doe
                patronymic: Doehovich
                phone_number: '375331234567'
                passport_code: KH1234567
          required:
          - profile
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Profile successfully created
          examples:
            application/json:
              profile:
                id: 585
                name: John
                surname: Doe
                patronymic: Doehovich
                phone_number: "+375331234567"
                passport_code: KH1234567
                user_id: 9812
                created_at: '2023-03-20T11:00:41.719Z'
                updated_at: '2023-03-20T11:00:41.719Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '422':
          description: Error occurred during profile create
          examples:
            application/json:
              message: Something went wrong
              errors:
                surname:
                - can't be blank
                - is too short (minimum is 2 characters)
                patronymic:
                - can't be blank
                - is too short (minimum is 5 characters)
                phone_number:
                - can't be blank
                - is too short (minimum is 7 characters)
                passport_code:
                - can't be blank
                - is invalid
                name:
                - is too short (minimum is 2 characters)
    put:
      summary: Updates user profile. By necr0me
      tags:
      - Profile
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            profile:
              type: object
              properties:
                name:
                  type: string
                surname:
                  type: string
                patronymic:
                  type: string
                phone_number:
                  type: string
                passport_code:
                  type: string
              required:
              - name
              - surname
              - patronymic
              - phone_number
              - passport_code
              example:
                name: John
                surname: Doe
                patronymic: Doehovich
                phone_number: '375331234567'
                passport_code: KH1234567
          required:
          - profile
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Profile found
          examples:
            application/json:
              profile:
                user_id: 9814
                name: New name
                surname: Doe
                patronymic: Doehovich
                phone_number: "+375331234567"
                id: 586
                passport_code: KH1234567
                created_at: '2023-03-20T11:00:41.758Z'
                updated_at: '2023-03-20T11:00:41.762Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '422':
          description: Error occurred during profile update
          examples:
            application/json:
              message: Something went wrong
              errors:
                name:
                - is too short (minimum is 2 characters)
  "/api/v1/routes":
    post:
      summary: Creates empty route. By necr0me
      tags:
      - Routes
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Route successfully created
          examples:
            application/json:
              message: Route was created
              route:
                id: 1983
                created_at: '2023-03-20T11:00:41.793Z'
                updated_at: '2023-03-20T11:00:41.793Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during route creation
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/routes/{route_id}":
    get:
      summary: Find concrete route. By necr0me
      tags:
      - Routes
      parameters:
      - name: route_id
        in: path
        type: integer
        required: true
        description: Id of route
      produces:
      - application/json
      responses:
        '200':
          description: Route found
          examples:
            application/json:
              route:
                id: 1985
                created_at: '2023-03-20T11:00:41.830Z'
                updated_at: '2023-03-20T11:00:41.830Z'
              stations:
              - id: 8928
                name: Mogilev
                created_at: '2023-03-20T11:00:41.833Z'
                updated_at: '2023-03-20T11:00:41.833Z'
              - id: 8929
                name: Mosty
                created_at: '2023-03-20T11:00:41.835Z'
                updated_at: '2023-03-20T11:00:41.835Z'
              - id: 8930
                name: Minsk
                created_at: '2023-03-20T11:00:41.837Z'
                updated_at: '2023-03-20T11:00:41.837Z'
        '404':
          description: Route not found
          examples:
            application/json:
              message: Couldn't find Route with 'id'=-1
    delete:
      summary: Delete concrete route. By necr0me
      tags:
      - Routes
      parameters:
      - name: route_id
        in: path
        type: integer
        required: true
        description: Id of route
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '204':
          description: Route successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Route not found
          examples:
            application/json:
              message: Couldn't find Route with 'id'=-1
        '422':
          description: Error occurred during route destroying
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/routes/{route_id}/add_station":
    post:
      summary: Add existing station to existing route. By necr0me
      tags:
      - Routes
      consumes:
      - application/json
      parameters:
      - name: route_id
        type: integer
        in: path
        required: true
        description: Id of route which to you want add station
      - name: params
        in: body
        schema:
          type: object
          properties:
            station_id:
              type: integer
          required:
          - station_id
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Station successfully added to route
          examples:
            application/json:
              message: Station was successfully added to route
              station:
                id: 8946
                name: Melbourne
                created_at: '2023-03-20T11:00:42.051Z'
                updated_at: '2023-03-20T11:00:42.051Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Route not found
          examples:
            application/json:
              message: Couldn't find Route with 'id'=-1
        '422':
          description: Station does not exist
          examples:
            application/json:
              message: Something went wrong
              errors:
              - 'Validation failed: Station must exist'
  "/api/v1/routes/{route_id}/remove_station/{station_id}":
    delete:
      summary: Remove station from route. By necr0me
      tags:
      - Routes
      parameters:
      - name: route_id
        in: path
        type: integer
        required: true
        description: Id of route where from station removing
      - name: station_id
        in: path
        type: integer
        required: true
        description: Id of station that removing from route
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Successfully remove station from route
          examples:
            application/json:
              message: Station was successfully removed from route
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Route not found
          examples:
            application/json:
              message: Couldn't find Route with 'id'=-1
        '422':
          description: Station already not in route
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Couldn't find StationOrderNumber with [WHERE "station_order_numbers"."route_id"
                = $1 AND "station_order_numbers"."station_id" = $2]
  "/api/v1/stations":
    get:
      summary: Gets all stations. By necr0me
      tags:
      - Stations
      produces:
      - application/json
      parameters:
      - name: station
        in: query
        type: string
        required: false
        description: Name of station or first N letters of station name
      responses:
        '200':
          description: Stations found (From query "?station=Mo")
          examples:
            application/json:
            - id: 8975
              name: Mogilev
              created_at: '2023-03-20T11:00:42.354Z'
              updated_at: '2023-03-20T11:00:42.354Z'
            - id: 8976
              name: Mosty
              created_at: '2023-03-20T11:00:42.356Z'
              updated_at: '2023-03-20T11:00:42.356Z'
    post:
      summary: Create a new station. By necr0me
      tags:
      - Stations
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            station:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
              example:
                name: Melbourne
          required:
          - station
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Station created
          examples:
            application/json:
              station:
                id: 8978
                name: Melbourne
                created_at: '2023-03-20T11:00:42.383Z'
                updated_at: '2023-03-20T11:00:42.383Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Errors during station creation
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Name is too short (minimum is 2 characters)
  "/api/v1/stations/{station_id}":
    get:
      summary: Get concrete station. By necr0me
      tags:
      - Stations
      produces:
      - application/json
      parameters:
      - name: station_id
        in: path
        type: string
        required: true
        description: Id of station
      responses:
        '200':
          description: Station was found
          examples:
            application/json:
              id: 8979
              name: Melbourne
              created_at: '2023-03-20T11:00:42.409Z'
              updated_at: '2023-03-20T11:00:42.409Z'
        '404':
          description: Station not found
          examples:
            application/json:
              message: Couldn't find Station with 'id'=-1
    put:
      summary: Update concrete station. By necr0me
      tags:
      - Stations
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            station:
              type: object
              properties:
                name:
                  type: string
              required:
              - name
              example:
                name: New name
          required:
          - station
      - name: station_id
        in: path
        type: integer
        required: true
        description: Id of station
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Station updated
          examples:
            application/json:
              station:
                name: New name
                id: 8980
                created_at: '2023-03-20T11:00:42.420Z'
                updated_at: '2023-03-20T11:00:42.428Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Station not found
          examples:
            application/json:
              message: Couldn't find Station with 'id'=-1
        '422':
          description: Something went wrong during station update
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Name can't be blank
              - Name is too short (minimum is 2 characters)
    delete:
      summary: Delete concrete station. By necr0me
      tags:
      - Stations
      produces:
      - application/json
      parameters:
      - name: station_id
        in: path
        type: integer
        required: true
        description: Id of station
      security:
      - Bearer: {}
      responses:
        '204':
          description: Successfully destroyed station
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Station not found
          examples:
            application/json:
              message: Couldn't find Station with 'id'=-1
        '422':
          description: Something went wrong during station destroying
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/tickets":
    post:
      summary: Creates new ticket. By necr0me
      tags:
      - Tickets
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            ticket:
              type: object
              properties:
                user_id:
                  type: integer
                seat_id:
                  type: integer
                departure_station_id:
                  type: integer
                arrival_station_id:
                  type: integer
                price:
                  type: number
                  format: float
              required:
              - user_id
              - seat_id
              - departure_station_id
              - arrival_station_id
              - price
              example:
                user_id: 1
                seat_id: 1
                departure_station_id: 1
                arrival_station_id: 2
                price: 10.0
            required:
            - ticket
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Ticket successfully created
          examples:
            application/json:
              message: Ticket successfully created
              ticket:
                id: 881
                price: 10.0
                user_id: 9842
                seat_id: 20179
                arrival_station_id: 8989
                departure_station_id: 8988
                created_at: '2023-03-20T11:00:42.557Z'
                updated_at: '2023-03-20T11:00:42.557Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '422':
          description: Error occurred during ticket create
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Price can't be blank
              - Price is not a number
  "/api/v1/tickets/{ticket_id}":
    get:
      summary: Gets concrete ticket. By necr0me
      tags:
      - Tickets
      security:
      - Bearer: {}
      parameters:
      - name: ticket_id
        in: path
        type: integer
        required: true
        description: Id of ticket that you want to find
      produces:
      - application/json
      responses:
        '200':
          description: Ticket was found
          examples:
            application/json:
              ticket:
                id: 882
                price: 1.5
                user_id: 9845
                seat_id: 20182
                arrival_station_id: 8994
                departure_station_id: 8994
                created_at: '2023-03-20T11:00:42.617Z'
                updated_at: '2023-03-20T11:00:42.617Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Ticket not found
          examples:
            application/json:
              message: Couldn't find Ticket with 'id'=-1
    delete:
      summary: Deletes concrete ticket. By necr0me
      tags:
      - Tickets
      security:
      - Bearer: {}
      parameters:
      - name: ticket_id
        in: path
        type: integer
        required: true
        description: Id of ticket that you want to destroy
      produces:
      - application/json
      responses:
        '200':
          description: Ticket successfully destroyed
          examples:
            application/json:
              message: Ticket successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Ticket not found
          examples:
            application/json:
              message: Couldn't find Ticket with 'id'=-1
        '422':
          description: Error occurred during ticket destroy
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/trains":
    get:
      summary: Retrieves all trains. By necr0me
      tags:
      - Trains
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Trains found
          examples:
            application/json:
              trains:
              - id: 3492
                route_id: 
                created_at: '2023-03-20T11:00:42.766Z'
                updated_at: '2023-03-20T11:00:42.766Z'
              - id: 3493
                route_id: 
                created_at: '2023-03-20T11:00:42.767Z'
                updated_at: '2023-03-20T11:00:42.767Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
    post:
      summary: Creates new empty train. By necr0me
      tags:
      - Trains
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            train:
              type: object
              properties:
                route_id:
                  type: integer
              required:
              - route_id
              example:
                route_id: 1
          required:
          - train
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '201':
          description: Train successfully created
          examples:
            application/json:
              message: Train was successfully created
              train:
                id: 3494
                route_id: 1999
                created_at: '2023-03-20T11:00:42.795Z'
                updated_at: '2023-03-20T11:00:42.795Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during train create
          examples:
            application/json:
              message: Seems like this entity does not exist
  "/api/v1/trains/{train_id}":
    get:
      summary: Show concrete train. By necr0me
      tags:
      - Trains
      parameters:
      - name: train_id
        in: path
        type: integer
        required: true
        description: Id of train that you want to see
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Train found
          examples:
            application/json:
              train:
                id: 3496
                route_id: 
                created_at: '2023-03-20T11:00:42.821Z'
                updated_at: '2023-03-20T11:00:42.821Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Train not found
          examples:
            application/json:
              message: Couldn't find Train with 'id'=-1
    put:
      summary: Update concrete train. By necr0me
      tags:
      - Trains
      consumes:
      - application/json
      parameters:
      - name: train_id
        in: path
        type: integer
        required: true
        description: Id of train that you want to update
      - name: params
        in: body
        schema:
          type: object
          properties:
            train:
              type: object
              properties:
                route_id:
                  type: integer
              required:
              - route_id
              example:
                route_id: 1
          required:
          - train
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Train successfully updated
          examples:
            application/json:
              message: Train was successfully updated
              train:
                route_id: 2002
                id: 3499
                created_at: '2023-03-20T11:00:43.059Z'
                updated_at: '2023-03-20T11:00:43.134Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Train not found
          examples:
            application/json:
              message: Couldn't find Train with 'id'=-1
        '422':
          description: Error occurred during train update
          examples:
            application/json:
              message: Seems like this entity does not exist
    delete:
      summary: Destroy concrete train. By necr0me
      tags:
      - Trains
      parameters:
      - name: train_id
        in: path
        type: integer
        required: true
        description: Id of train that you want to update
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '204':
          description: Train successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Train not found
          examples:
            application/json:
              message: Couldn't find Train with 'id'=-1
        '422':
          description: Error occurred during adding carriage to train
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/api/v1/trains/{train_id}/add_carriage":
    post:
      summary: Add concrete carriage to train. By necr0me
      tags:
      - Trains
      consumes:
      - application/json
      parameters:
      - name: train_id
        in: path
        type: integer
        required: true
        description: Id of train which to you want add carriage
      - name: params
        in: body
        schema:
          type: object
          properties:
            carriage_id:
              type: integer
          required:
          - carriage_id
          example:
            carriage_id: 1
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage successfully added to train
          examples:
            application/json:
              message: Carriage was successfully added to train
              carriage:
                train_id: 3507
                order_number: 1
                name: Dionysus
                carriage_type_id: 7067
                id: 5698
                created_at: '2023-03-20T11:00:43.693Z'
                updated_at: '2023-03-20T11:00:43.701Z'
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Train not found
          examples:
            application/json:
              message: Couldn't find Train with 'id'=-1
        '422':
          description: Error occurred during adding carriage to train
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Couldn't find Carriage with 'id'=-1
  "/api/v1/trains/{train_id}/remove_carriage/{carriage_id}":
    delete:
      summary: Remove concrete carriage from train. By necr0me
      tags:
      - Trains
      parameters:
      - name: train_id
        in: path
        type: integer
        required: true
        description: Id of train which from you want to remove carriage
      - name: carriage_id
        in: path
        type: integer
        required: true
        description: Id of carriage which you want to remove from train
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Carriage successfully removed from train
          examples:
            application/json:
              message: Carriage was successfully removed from train
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: Train not found
          examples:
            application/json:
              message: Couldn't find Train with 'id'=-1
        '422':
          description: Error occurred during removing carriage from train
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Can't remove carriage that not in train
  "/api/v1/users/{user_id}":
    get:
      summary: Retrieves concrete user. By necr0me
      tags:
      - Users
      parameters:
      - name: user_id
        in: path
        type: integer
        required: true
        description: Id of user that you want to see
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: User found
          examples:
            application/json:
              user:
                id: 9880
                email: johndoe@gmail.com
                password_digest: "$2a$04$bFpiJ/lCJuJ/i54qdTKYTul3ogL2XxVb5cwL7drmlnKvP7mOJSFaa"
                created_at: '2023-03-20T11:00:44.165Z'
                updated_at: '2023-03-20T11:00:44.165Z'
                role: admin
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
    put:
      summary: Updates user password. By necr0me
      tags:
      - Users
      consumes:
      - application/json
      parameters:
      - name: user_id
        in: path
        type: integer
        required: true
        description: Id of user that updates password (ANY user can update only his
          own password)
      - name: params
        in: body
        schema:
          type: object
          properties:
            user:
              type: object
              properties:
                password:
                  type: string
              required:
              - password
              example:
                password: p4$$w0rD
          required:
          - user
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: User found
          examples:
            application/json:
              message: You have successfully updated your credentials
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '422':
          description: Error occurred during update
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Password can't be blank
              - Password is too short (minimum is 7 characters)
  "/users/sign_up":
    post:
      summary: Register new user. By necr0me
      tags:
      - Registrations
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            user:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
              - email
              - password
              example:
                email: mail@gmail.com
                password: p4$$w0rD
          required:
          - user
      produces:
      - application/json
      responses:
        '201':
          description: User successfully created
          examples:
            application/json:
              message: You have successfully registered
        '422':
          description: Error occurred during user registration
          examples:
            application/json:
              errors:
                email:
                - can't be blank
                - is invalid
                password:
                - can't be blank
                - is too short (minimum is 7 characters)
                - can't be blank
  "/users/{user_id}":
    delete:
      summary: Destroy user. By becr0me
      tags:
      - Registrations
      parameters:
      - name: user_id
        in: path
        type: integer
        required: true
        description: Id of user that destroys account (user can destroy only own account
          unless he/she is admin)
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '204':
          description: User successfully destroyed
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
        '403':
          description: You are forbidden to perform this action
          examples:
            application/json:
              message: You are not allowed to do this action
        '404':
          description: User not found
          examples:
            application/json:
              message: Couldn't find User with 'id'=-1
        '422':
          description: Error occurred during user destroy
          examples:
            application/json:
              message: Something went wrong
              errors:
              - Error message
  "/users/login":
    post:
      summary: Authenticates user. By necr0me
      tags:
      - Authentication
      consumes:
      - application/json
      parameters:
      - name: params
        in: body
        schema:
          type: object
          properties:
            user:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
              - email
              - password
              example:
                email: mail@gmail.com
                password: p4$$w0rD
          required:
          - user
      produces:
      - application/json
      responses:
        '201':
          description: Authenticated successfully
          examples:
            application/json:
              message: You have successfully logged in
              access_token: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjo5ODk2LCJleHAiOjE2NzkzMTE4NDQsImlhdCI6MTY3OTMxMDA0NH0.8VoiH_dVHEd3wWJuJuZ3lhlt6ESNX_fBrAigsjeDkOI
        '400':
          description: Error occurred during authentication
          examples:
            application/json:
              message: Something went wrong
              errors:
                email:
                - Can't find user with such email
  "/users/refresh_tokens":
    get:
      summary: Refreshes access and refresh tokens. By necr0me
      tags:
      - Authentication
      produces:
      - application/json
      responses:
        '200':
          description: Tokens successfully updated
          examples:
            application/json:
              access_token: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjo5ODk4LCJleHAiOjE2NzkzMTE4NDQsImlhdCI6MTY3OTMxMDA0NH0.zVW7StT-6vUGAIoUAjOEzhHnV1DeycBmYsQH0CN3r5k
        '401':
          description: Error occurred during tokens update
          examples:
            application/json:
              errors:
              - Nil JSON web token
  "/users/logout":
    delete:
      summary: Logouts user. By necr0me
      tags:
      - Authentication
      parameters:
      - name: Authorization
        in: header
        type: string
        required: true
        description: 'Authorization header of user that logouts. Header looks like
          this: ''Bearer <access-token>'''
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: Successful logout
          examples:
            application/json:
              message: You have successfully logged out.
        '401':
          description: You are unauthorized
          examples:
            application/json:
              message: You're not logged in
              errors:
              - Nil JSON web token
securityDefinitions:
  Bearer:
    description: Authorization header (JWT-token)
    type: apiKey
    name: Authorization
    in: header
servers:
- url: http://{defaultHost}/
  variables:
    defaultHost:
      default: localhost:3000
